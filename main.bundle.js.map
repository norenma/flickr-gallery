{"version":3,"sources":["webpack:///./src/app/location/location.service.ts","webpack:///./src/app/photos/photo.model.ts","webpack:///./src/app/photos/photos.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/location/coordinate.model.ts","webpack:///./src/app/photo-detail/photo-detail.component.ts","webpack:///./src/app/photo-gallery/photo-gallery.component.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/photo-detail/photo-detail.component.css","webpack:///./src/app/photo-gallery/photo-gallery.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/photo-detail/photo-detail.component.html","webpack:///./src/app/photo-gallery/photo-gallery.component.html"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["import { Coordinate } from './coordinate.model';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class LocationService {\n\n  constructor() {}\n\n  /**\n   * The the user's current location. \n   */\n  getCurrentLocation(): Promise<Coordinate> {\n    return new Promise<Coordinate>((resolve, reject) => {\n      navigator.geolocation.getCurrentPosition(position => {\n        let coords = new Coordinate();\n        coords.latitude = position.coords.latitude;\n        coords.longitude = position.coords.longitude;\n        resolve(coords);\n      }, err => {\n        console.log(\"Can't get users location\", err);\n        reject(\"Cant get users location\");\n      }, {\n          maximumAge: 1000 * 60 * 1000,\n          enableHighAccuracy: false\n        });\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/location/location.service.ts","export class Photo {\n    URL_tumb: string;\n    URL_large: string;\n\n    setUrls(farm, server, id, secret) {\n        this.URL_tumb = this.getUrl(farm, server, id, secret, 'm');\n        this.URL_large = this.getUrl(farm, server, id, secret, 'z');\n    }\n\n    private getUrl(farm, server, id, secret, size){\n        let url = 'https://farm' + farm + '.staticflickr.com/' +\n            server + '/' + id + '_' + secret + '_' + size + '.jpg';\n        return url;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/photos/photo.model.ts","import { Subject } from 'rxjs';\nimport { Coordinate } from '../location/coordinate.model';\nimport { Injectable } from '@angular/core';\nimport { Response, Headers, RequestOptions, Http } from '@angular/http';\nimport 'rxjs/add/operator/toPromise';\n\nimport { environment } from '../../environments/environment';\nimport { LocationService } from '../location/location.service';\n\nconst FLICKR_URL = environment.FLICKR_URL;\nconst FLICKR_API_KEY = environment.FLICKR_API_KEY;\n\n// Fallback position: Gothenburg city centre.\nconst gbgLocation = {\n  'latitude': 57.708870,\n  'longitude': 11.974560,\n}\n\n// Error strings\nconst locationError = 'Can not get your location, showing images from Gothenburg!';\nconst apiError = 'Can not reach the flickr service, try again later';\n\ndeclare var XDomainRequest;\n\n\n@Injectable()\nexport class PhotosService {\n\n  private errorSubject = new Subject<string>();\n  $error = this.errorSubject.asObservable();\n\n  constructor(private http: Http, private location: LocationService) { }\n\n  getPhotos() {\n    return new Promise<any>((resolve, reject) => {\n      this.getLocation().then(coords => {\n        this.getPhotosAtLocation(coords).then(resolve);\n      });\n    });\n  }\n\n  private getLocation() {\n    return this.location.getCurrentLocation().then(res => {\n      return res;\n    }, err => {\n      // Can't get the user's location, show images from Gothenburg.\n      this.errorSubject.next(locationError);\n      return gbgLocation\n    });\n  }\n\n  private getPhotosAtLocation(coords: Coordinate) {\n    let parameter_string = '?method=flickr.photos.search'\n      + this.getQueryParameter('lat', coords.latitude)\n      + this.getQueryParameter('lon', coords.longitude)\n      + this.getQueryParameter('sort', 'interestingness-desc');\n    return this.postToFlickr(parameter_string);\n  }\n\n  private postToFlickr(parameter_string) {\n    let url = FLICKR_URL + parameter_string;\n    url = this.addQueryParameter(url, 'api_key', FLICKR_API_KEY);\n    url = this.addQueryParameter(url, 'format', 'json');\n\n    let headers = new Headers({ 'content-type': 'multipart/form-data' });\n    let ops = new RequestOptions({ headers: headers });\n\n    // if IE9, use XDomainRequest.\n    if (window['XDomainRequest']) {\n      return this.IEPostRequest(url);\n    }\n\n    return this.http.post(url, {}, ops).toPromise().then((res: any) => {\n      return this.processPhotos(res._body);\n    }, this.apiError);\n  }\n\n  // IE9 does not support standard XMLHttpRequest-objects to be sent to \n  // different domains, need to use XDomainRequest-objects instead. \n  private IEPostRequest(url, ) {\n    return new Promise((resolve, reject) => {\n      var xdr = new XDomainRequest();\n      xdr.open(\"post\", url);\n\n      // Request failed.\n      xdr.ontimeout = this.apiError;\n      xdr.onerror = this.apiError;\n\n      xdr.onload = () => {\n        resolve(this.processPhotos(xdr.responseText));\n      }\n\n      setTimeout(() => {\n        xdr.send();\n      });\n    });\n  }\n\n  // Turns data from the API into JSON.\n  private processPhotos(jsonResponse) {\n    let photos;\n    let jsonFlickrApi = this.jsonFlickrApi;\n    eval(\"(\" + \"photos =\" + jsonResponse + \")\");\n    return photos;\n  }\n\n  private apiError = err => {\n    this.errorSubject.next(apiError);\n  };\n\n  // This is the jsonp-function that the Flickr api sends.\n  private jsonFlickrApi = (response) => {\n    if (response.stat === 'fail') {\n      this.errorSubject.next(apiError);\n    }\n    //photos = response.photos;\n    return response.photos;\n  };\n\n  // Functions to prepare the url that is sent to the api.\n  private addQueryParameter(url, parameter_name, value) {\n    return url + this.getQueryParameter(parameter_name, value);\n  }\n\n  private getQueryParameter(parameter_name, value) {\n    return '&' + parameter_name + '=' + value;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/photos/photos.service.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false,\n\n  FLICKR_URL : 'https://api.flickr.com/services/rest/',\n  FLICKR_API_KEY: '2428c2ce8073f680a6048a32693384d9',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 414;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 414\n// module chunks = 1","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport 'ts-helpers';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { LocationService } from './location/location.service';\nimport { PhotosService } from './photos/photos.service';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { HttpModule, XSRFStrategy } from '@angular/http';\n\n\n\nimport { AppComponent } from './app.component';\nimport { PhotoGalleryComponent } from './photo-gallery/photo-gallery.component';\nimport { PhotoDetailComponent } from './photo-detail/photo-detail.component';\n\n\nexport class NoXSRFStrategy {\n  configureRequest(req) {\n    // Remove `x-xsrf-token` from request headers\n  }\n}\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    PhotoGalleryComponent,\n    PhotoDetailComponent,\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpModule\n  ],\n  providers: [PhotosService, LocationService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","export class Coordinate {\n    latitude : number;\n    longitude : number;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/location/coordinate.model.ts","import { Photo } from '../photos/photo.model';\nimport { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'app-photo-detail',\n  templateUrl: './photo-detail.component.html',\n  styleUrls: ['./photo-detail.component.css']\n})\nexport class PhotoDetailComponent implements OnInit {\n\n  @Input() photo: Photo;\n  @Output() close = new EventEmitter();\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  onClose() {\n    this.close.emit();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/photo-detail/photo-detail.component.ts","import { HostListener, Component, OnInit } from '@angular/core';\nimport { HttpModule } from '@angular/http';\n\nimport { PhotosService } from '../photos/photos.service';\nimport { Photo } from '../photos/photo.model';\n\n\n@Component({\n  selector: 'app-photo-gallery',\n  templateUrl: './photo-gallery.component.html',\n  styleUrls: ['./photo-gallery.component.css']\n})\nexport class PhotoGalleryComponent implements OnInit {\n\n  private photos: Array<Photo> = [];\n  private currentDetail: Photo = null;\n  private imagesLoaded = 20;\n\n  private loading = false;\n  private error = false;\n  private errorText = \"\";\n\n  constructor(private photosService: PhotosService) { }\n\n  ngOnInit() {\n    this.photosService.$error.subscribe(this.showError);\n    this.getImages();\n  }\n\n  private getImages() {\n    this.showLoading();\n    this.photosService.getPhotos().then(res => {\n      this.createPhotos(res);\n      this.hideLoading();\n    });\n  }\n\n  private createPhotos(data) {\n    if (data) {\n      data.photo.forEach(data => {\n        let photo = new Photo();\n        photo.setUrls(data.farm, data.server, data.id, data.secret);\n        this.photos.push(photo);\n      });\n    }\n  }\n\n  private showLoading() {\n    this.loading = true;\n  }\n\n  private hideLoading() {\n    this.loading = false;\n  }\n\n  private showError = error => {\n    this.errorText = error;\n    this.error = true;\n  }\n\n  private showDetail(photo: Photo) {\n    this.currentDetail = photo;\n  }\n\n  private closeDetail() {\n    this.currentDetail = null;\n  }\n\n  // Detects when user has scrolled to the end of the page, template will load more images. \n  @HostListener('window:scroll', ['$event'])\n  private onScroll(event) {\n    if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\n      // you're at the bottom of the page\n      this.imagesLoaded += 20;\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/photo-gallery/photo-gallery.component.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"h1 {\\n    text-align: center;\\n    font-family: \\\"Brush Script MT\\\", cursive;\\n    font-size: 40px;\\n    font-style: normal;\\n    font-variant: normal;\\n    font-weight: 500;\\n    line-height: 26.4px;\\n    margin-top: 15vh;\\n}\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = 687\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".detail-view {\\n    position: fixed;\\n    width: 100%;\\n    height: 100vh;\\n    background-color: rgba(255, 255, 255, 0.7);\\n}\\n\\n.detail-view img {\\n    width: auto;\\n    margin-top: 10vh;\\n    height: 80vh;\\n}\\n\\nbutton.close {\\n    position: fixed;\\n    top: 20px;\\n    right: 20px;\\n}\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/photo-detail/photo-detail.component.css\n// module id = 688\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".photo-item.loaded,\\n.photo-item {\\n    height: 240px;\\n    margin-bottom: 20px;\\n}\\n\\n.photo-gallery {\\n    margin-top: 15vh;\\n}\\n\\n.loading-background {\\n    position: fixed;\\n    top: 0;\\n    width: 100%;\\n    height: 100vh;\\n    background-color: rgba(255, 255, 255, 1);\\n}\\n\\n.loading-text {\\n    margin: auto;\\n    text-align: center;\\n    margin-top: 50vh;\\n    font-size: 30px;\\n    font-family: \\\"Brush Script MT\\\", cursive;\\n}\\n\\napp-photo-detail {\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n}\\n\\n.error-text {\\n    text-align: center;\\n    color: #bb3b39;\\n    font-style: italic;\\n    margin-bottom: 30px;\\n    font-size: 16px;\\n    border: 1px solid rgba(0, 0, 0, 0.3);\\n}\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/photo-gallery/photo-gallery.component.css\n// module id = 689\n// module chunks = 1","module.exports = \"<h1>\\n Photos from your neighbourhood\\n</h1>\\n\\n<app-photo-gallery></app-photo-gallery>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 691\n// module chunks = 1","module.exports = \"<div class=\\\"detail-view\\\" (click)=\\\"onClose()\\\">\\n<button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n  <img class=\\\"center-block\\\" src=\\\"{{photo.URL_large}}\\\" alt=\\\"Loading image...\\\">\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/photo-detail/photo-detail.component.html\n// module id = 692\n// module chunks = 1","module.exports = \"<div class=\\\"photo-gallery\\\">\\n  <!--error-text-->\\n  <p class=\\\"error-text\\\" *ngIf=\\\"error\\\"> {{errorText}} <p>\\n\\n      <!--the images-->\\n      <div class=\\\"row\\\">\\n        <div *ngFor=\\\" let photo of photos; let i = index \\\">\\n          <div class=\\\"col-lg-3 col-md-4 col-sm-6 col-xs-12 photo-item\\\" *ngIf=\\\"i < imagesLoaded\\\">\\n            <img (click)=\\\"showDetail(photo)\\\" src=\\\"{{photo.URL_tumb}}\\\" class=\\\"center-block \\\" alt=\\\" Loading ... \\\">\\n          </div>\\n        </div>\\n      </div>\\n</div>\\n\\n<app-photo-detail [photo]=\\\"currentDetail\\\" (close)=\\\"closeDetail()\\\" *ngIf=\\\"currentDetail\\\"></app-photo-detail>\\n\\n<!--loading.. -->\\n<div *ngIf='loading' class=\\\"loading-background\\\">\\n  <p class=\\\"loading-text\\\"> Getting photos in your area... </p>\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/photo-gallery/photo-gallery.component.html\n// module id = 693\n// module chunks = 1"],"sourceRoot":""}